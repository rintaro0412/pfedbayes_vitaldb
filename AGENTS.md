## プロジェクト概要
- リポジトリ: VitalDB を用いた IOH 予測パイプライン（中央学習 + 連合学習比較: FedAvg, pFedBayes もしくは feduab）。
- 大きな成果物は `vitaldb_data/`、`federated_data/`、`runs/`、`outputs_*`、`*.csv`、`*.npz`、`*.pdf` に配置される。

## コミュニケーション方針（このアカウント共通）
- ユーザーの入力だけでは目的が曖昧なときは、作業に入る前に短い質問をしつつ「本当に達成すべき最適なゴール」を提案する（ゴール調整）。
- 先に結論、その後に理由と根拠、最後に手順の順で書く。共感表現や感嘆符は不要。
- 説明は平易な日本語にする。専門用語や横文字はできるだけ避け、避けられない場合は短く言い換えを添える。比喩は使わない。
- 事実確認できないことは断言しない。不明な場合は「わかりません」と書く。推測の場合は必ず「（推測です）」と明記する。
- 重要な主張（設計判断・比較・危険性・性能差・推奨設定など）には根拠を付ける。可能なら発行年も添える。公式文書や一次情報を優先する。

## 作業ルール
- 変更は小さく、元に戻しやすい形を優先。大きなリファクタは依頼があった場合のみ。
- 時間や計算コストが大きいコマンド（データDL、データセット生成、学習、評価）は事前に確認。
- `scripts/build_dataset.py` は出力ディレクトリを削除して作り直すため、再生成は必ず確認。
- 大きなデータ/成果物ファイルの編集は避け、明示的な依頼がない限り読み取り専用扱い。
- 振る舞いやデフォルトを変更した場合は `README.md` または `report.md` も更新。
- 追加の質問が必要なときは、必要最小限（1〜3点）に絞る。質問がなくても進められる部分は先に進め、未確定点は「要確認」として分離する。

## 実装方針
- 新しい入口を増やすより、既存の `scripts/` と `configs/` を優先して利用。
- 実験の出力は `runs/` 配下に置き、指示がない限りコミット対象にしない。
- 依存追加は事前確認の上、`requirements-venv.txt` / `requirements-gpu.txt` を更新。
- 変更点は「目的 → 変更内容 → 影響範囲 → 戻し方」が追える形にする（差分が小さい単位で分割）。

## 検証
- 必要な場合は軽いスモークチェック（`--help` や小さなサンプル実行）で済ませる。
- 複数エポック学習や全量データ実行は事前に確認。
- 再現性に関わる設定（乱数種、データ分割、閾値、評価条件）を変更したら `report.md` に明記する。
